<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="/manifest.json">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="  #1f1f1f">
    <meta name="apple-mobile-web-app-status-bar-style" content="  #1f1f1f">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Main Page - Moniegram</title>
    <link rel="stylesheet" href="./css/main-page.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Jacquarda+Bastarda+9&family=Poppins:ital,wght@0,400;1,300;1,400&display=swap" rel="stylesheet">

    
</head>
<body>
   
 <section class="header">
    <div class="logo">
        <img src="./images/user_9303328.png" alt="">
    </div>
    <img src="./images/notification_12998251.png" alt="" class="notification">
 </section>
 <section class="search">
    <input type="text" class="gradient-border" placeholder="Search...">
 </section>

 <div class="balance-container">
  
    <div class="balance-display">
        <h3>Balance</h3>
        <span id="balance">*****</span>
        <button id="toggleBalance" aria-label="Toggle balance visibility">
            <img src="./images/interface_13741441.png" alt="Toggle Balance" />
        </button>
    </div>
    <div class="button">
        <button>Depsoit</button>
    </div>
</div>


<section class="functions">
    <div class="functions1">
        <img src="./images/follow_15535212.png" alt="">
        <img src="./images/delete_13911643.png" alt="">
        <img src="./images/market_13248824.png" alt="">
        <img src="./images/moniegram logo.png" alt="">
    </div>
    <div class="functions2">
        <img src="./images/wallet_6948492.png" alt="">
        <img src="./images/notification_12998251.png" alt="">
        <img src="./images/home_15382980.png" alt="">
        <img src="./images/user_9303328.png" alt="">
    </div>
</section>

<div class="slideshow-container">
    <!-- Slides -->
    <div class="mySlides fade">
        <img src="./images/Frame 26.png" alt="Item 1">
    </div>
    <div class="mySlides fade">
        <img src="./images/Frame 27.png" alt="Item 2">
    </div>
    <div class="mySlides fade">
        <img src="./images/Frame 28.png" alt="Item 3">
    </div>
    <div class="mySlides fade">
        <img src="./images/Frame 29.png" alt="Item 4">
    </div>

    <!-- Indicators/Dots -->
    <div class="dots-container">
        <span class="dot" onclick="currentSlide(1)"></span> 
        <span class="dot" onclick="currentSlide(2)"></span> 
        <span class="dot" onclick="currentSlide(3)"></span> 
        <span class="dot" onclick="currentSlide(4)"></span> 
    </div>
</div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h3>Welcome to Moniegram</h3>
            <p>Invest smartly and grow your wealth with us.</p>
            <a href="#" class="cta-button">Invest now</a><br><br>
            <h3>Our Plans</h3>

            <div class="plans">
                <div class="plan-line1">
                    <div class="plan">
                        <img src="./images/Frame 34.png" alt="">
                        <p>
                            Our Plan A is ideal for investors seeking steady, low-risk growth. With a 10% return on investment (ROI), this plan offers a solid and reliable performance for those who prefer a conservative approach. It’s a great way to begin your investment journey, allowing you to build confidence while minimizing exposure to market fluctuations.
                        </p>
                    </div>
                    <div class="plan">
                        <img src="./images/Frame 35.png" alt="">
                        <p>
                            Plan B: 20% Returns
For investors seeking moderate growth with slightly higher returns, Plan B offers a 20% ROI. This plan is balanced, providing an opportunity for enhanced returns without taking on excessive risk. It’s perfect for investors looking to move beyond the conservative approach and aim for better growth potential.
                        </p>
                    </div>
                    <div class="plan">
                        <img src="./images/Frame 36.png" alt="">
                        <p>
                            Plan C: 50% Returns
Plan C is for investors ready to engage in higher-reward opportunities, with a 50% ROI. This plan is structured for those who are comfortable with moderate risk and want to experience significant gains. It’s an ideal choice for those seeking to capitalize on market opportunities while still maintaining some level of risk control.
                        </p>
                    </div>
                    <div class="plan">
                        <img src="./images/Frame 37.png" alt="">
                        <p>
                            Plan D: 100% Returns
For the boldest investors, Plan D offers an exceptional 100% ROI, doubling your investment. This plan targets high-return opportunities and is best suited for those with a higher risk tolerance. It’s designed for investors looking to maximize their capital in the shortest time possible, with the understanding that it comes with increased exposure to market fluctuations.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Deposit Overlay -->
<div id="depositOverlay" class="overlay">
    <div class="overlay-content">
        <button id="closeOverlay" class="close-button">X</button>
        <h3>Deposit Options</h3>
        <div class="option" id="localCurrencyButton">
            <h3>Buy with local currency</h3>
            <p>Visa, Mastercard, American Express</p>
        </div>
        <div class="option" id="cryptoButton">
            <h3>Deposit Crypto</h3>
            <p>Already have crypto? Deposit directly.</p>
        </div>
    </div>
</div>

<!-- Full-Page Overlay for Stripe Elements -->
<div id="stripeOverlay" class="full-page-overlay">
    <div class="overlay-content">
        <button id="closeStripe">Close</button>
        <h2>Enter Card Details</h2>
        <!-- Stripe Elements will be rendered here -->
        <div id="card-element"></div>
        <button id="submitPayment">Submit Payment</button>
    </div>
</div>



     <!-- TradingView Widget BEGIN -->
     <section id="market-cap" class="market-section"  style="text-align: center;">
        <h2 style="color: rgb(255, 166, 42);" >Real-Time Crypto/Stock Market</h2>
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget" style="height:calc(100% - 100px);width:100%"></div>
            <div class="tradingview-widget-copyright">
                <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
                    <span class="blue-text">Track all markets</span>
                </a>
            </div>
            
        </div>

        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
            {
                "width": "100%",
                "height": "500",
                "autosize": true,
                "symbol": "BINANCE:BTCUSDT",
                "interval": "60",
                "timezone": "America/New_York",
                "theme": "light",
                "style": "1",
                "locale": "en",
                "withdateranges": true,
                "allow_symbol_change": true,
                "calendar": false,
                "studies": [
                    "STD;24h%Volume"
                ],
                "support_host": "https://www.tradingview.com"
            }
            </script>
    </section>

    <nav class="bottom-nav">
        <ul class="nav-links">
            <li><a href="#"><img src="./images/home_15382980.png" alt="Home Icon"><span>Home</span></a></li>
            <li><a href="#"><img src="./images/market_13248824.png" alt="Services Icon" style="background-color: rgb(255, 174, 0); border-radius: 20rem;"><span>Chat</span></a></li>
            <li><a href="#"><img src="./images/money-management_5166084.png" alt="About Icon" style="border-radius: 20rem; background-color: rgb(255, 174, 0);"><span>Wallet</span></a></li>
            <li><a href="#"><img src="./images/user_9303328.png" alt="About Icon" style="border-radius: 20rem;"><span>Profile</span></a></li>
            <li><a href="#"><img src="./images/wallet_6948492.png" alt="Contact Icon"><span>Assets</span></a></li>
        </ul>
    </nav>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Moniegram. All rights reserved.</p>
    </footer>
    <script src="https://js.stripe.com/v3/"></script>
<script src="java.js"></script>
<script>
    // Register the Service Worker
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
            navigator.serviceWorker.register('/service-worker.js')
                .then(function (registration) {
                    console.log('Service Worker registered with scope:', registration.scope);
                })
                .catch(function (error) {
                    console.log('Service Worker registration failed:', error);
                });
        });
    }

    // Main script logic
    document.addEventListener('DOMContentLoaded', () => {
        const userEmail = localStorage.getItem('userEmail');
        const toggleBalanceBtn = document.getElementById('toggleBalance');
        const balanceDisplay = document.getElementById('balance');
        let actualBalance; // Variable to store actual balance

        // Fetch user's balance from the server
        if (userEmail) {
            fetch(`/api/getBalance?email=${encodeURIComponent(userEmail)}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Update the balance in the HTML
                    actualBalance = data.balance; // Store actual balance from the response
                    balanceDisplay.textContent = actualBalance ? `$${actualBalance}` : 'No balance available';
                })
                .catch(error => {
                    console.error('Error fetching balance:', error);
                });
        } else {
            console.error('User email not found in local storage');
        }

        // Toggle balance visibility
        toggleBalanceBtn.addEventListener('click', () => {
            if (balanceDisplay.innerText === '*****') {
                balanceDisplay.innerText = actualBalance ? `$${actualBalance}` : 'No balance available';
            } else {
                balanceDisplay.innerText = '*****';
            }
        });
    });

    // Deposit overlay functionality
    const depositButton = document.querySelector('.button button');
    const depositOverlay = document.getElementById('depositOverlay');
    const closeOverlayButton = document.getElementById('closeOverlay');

    depositButton.addEventListener('click', () => {
        depositOverlay.classList.add('show'); // Show the overlay with sliding effect
    });

    closeOverlayButton.addEventListener('click', () => {
        depositOverlay.classList.remove('show'); // Hide the overlay
    });

    // Handle click events on deposit options
    document.getElementById('buyDollarOption').addEventListener('click', () => {
        console.log("Buy Dollar option clicked");
    });

    document.getElementById('depositCryptoOption').addEventListener('click', () => {
        // Specify what happens when "Deposit Crypto" is clicked
        console.log("Deposit Crypto option clicked");
    });

    // Initialize Stripe
    const stripe = Stripe('pk_test_51Q9WFzJZJDw2RPx7dXthW0Gzwldky3EnllvchMj0dPINTQYrQK2QxKtAy4OkWTCuj75GCWxO9jCeh6ZoR9Mw8pNF00mTCLvXyM'); // Replace with your Stripe public key
    const elements = stripe.elements();
    const cardElement = elements.create('card');
    cardElement.mount('#card-element');

    // Handle payment submission
    document.getElementById('submit-button').addEventListener('click', async () => {
        const amount = parseInt(document.getElementById('amountInput').value) * 100; // Convert to cents

        // Call your backend to create a payment intent
        const response = await fetch('http://localhost:3000/create-payment-intent', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ amount }),
        });

        const { clientSecret } = await response.json();

        // Confirm the payment
        const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
            payment_method: {
                card: cardElement,
            },
        });

        if (error) {
            // Show error to your customer
            console.error(error.message);
            alert(error.message);
        } else {
            // Payment succeeded
            if (paymentIntent.status === 'succeeded') {
                console.log('Payment succeeded!');
                alert('Payment succeeded!');
                depositOverlay.classList.remove('show'); // Close the overlay after successful payment
            }
        }
    });
</script>

  
</body>
</html>
